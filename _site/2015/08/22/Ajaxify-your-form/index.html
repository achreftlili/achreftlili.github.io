<!DOCTYPE html>
<html lang="en-us">

  <head prefix="og: http://ogp.me/ns#">
  <meta charset="utf-8">
  <meta property="og:locale" content="en_US">

  <meta name="author" content="Mark Otto">

  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <title>
    
      Get Views with Ajax and Ajaxify their Forms! &middot; Achref Tlili
    
  </title>

  
  <meta property="og:title" content="Get Views with Ajax and Ajaxify their Forms!">
  <meta property="og:type" content="article">
  <meta property="og:url" content="https://achreftlili.github.io//2015/08/22/Ajaxify-your-form/">
  <meta property="og:description" content="">
  
  <meta property="article:published_time" content="2015-08-22T00:00:00+02:00">
  
  
  
  <meta content="Symfony" property="article:tag">
  
  
  <meta name="twitter:card" content="summary">
  <meta name="twitter:site" content="@couac">
  <meta name="twitter:creator" content="@couac">
  <meta name="twitter:title" content="Get Views with Ajax and Ajaxify their Forms!">
  <meta name="twitter:description" content="">
  

  <!-- CSS -->
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/poole.css">
  <link rel="stylesheet" href="/css/syntax.css">
  <link rel="stylesheet" href="/css/lanyon.css">
  <link rel="stylesheet" href="/css/skills.css">

  <link rel="stylesheet" href="/css/fontawesome/css/font-awesome.min.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="shortcut icon" href="/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">


</head>


  <body class="theme-base-02">


    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Achref Tlili Blog for web development</p>
 <img src="/images/me.jpg" alt="Me" style="width:100px;height:130px;">
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Home</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/Blog_purpose/">Purpose  !</a>
        
      
    
      
        
          <a class="sidebar-nav-item" href="/about/">About Tlili achref</a>
        
      
    
      
    
      
        
      
    
      
        
      
    
      
    
      
        
      
    
      
        
      
    



  <div class="sidebar-item">
    <ul class="social-links">
      <li>
        <i class="fa fa-github"></i>&nbsp;<a target="_blank"href="http://www.github.com/achreftlili">GitHub</a>
      </li>
      <li>
        <i class="fa fa-linkedin"></i>&nbsp;<a target="_blank" href="https://tn.linkedin.com/pub/tlili-achref/a2/857/951">LinkedIn</a>
      </li>
      <li>
        <i class="fa fa-twitter"></i>&nbsp;<a target="_blank" href="http://www.twitter.com/Audiovisuelle3">Twitter</a>
      </li>
    </ul>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Achref Tlili</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<div class="post">
  <h1 class="post-title">Get Views with Ajax and Ajaxify their Forms!</h1>
  <span class="post-date">22 Aug 2015</span>
  <p><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/styles/default.min.css">
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/8.7/highlight.min.js"></script></p>

<h3>Get Views with Ajax</h3>

<p>In this post we gonna see how to add ajax to our forms in symfony which will help us create ajaxified web pages in seconds so focus :p</p>

<blockquote>
<p>first thing you will need <a href="https://jquery.com/">jQuery</a> plugin,
   then we create a javascript function which we will use to get the response of a specific route, this function get two parameters, the first is the route path the other one is the id of the div where you wanna put the response of your route.</p>
</blockquote>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">script</span> <span class="nx">src</span><span class="o">=</span><span class="s2">&quot;https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js&quot;</span><span class="o">&gt;&lt;</span><span class="err">/script&gt;</span>

  <span class="kd">function</span> <span class="nx">routeBringer</span><span class="p">(</span><span class="nx">route</span><span class="p">,</span><span class="nx">id_of_div</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="o">+</span><span class="nx">id_of_div</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="s2">&quot;Chargement ...&quot;</span><span class="p">);</span>
    <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
      <span class="nx">type</span><span class="o">:</span> <span class="s2">&quot;POST&quot;</span><span class="p">,</span>
      <span class="nx">url</span><span class="o">:</span> <span class="nx">route</span><span class="p">,</span>
      <span class="nx">data</span><span class="o">:</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
      <span class="nx">cache</span><span class="o">:</span> <span class="kc">false</span><span class="p">,</span>
      <span class="nx">success</span><span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">html</span><span class="p">){</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;#&#39;</span><span class="o">+</span><span class="nx">idul</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">html</span><span class="p">);</span> <span class="p">}});</span>
<span class="p">}</span></code></pre></div>

<blockquote>
<p>After that we gonna  call it in a button which will create a new Contact for example.</p>
</blockquote>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="o">&lt;</span><span class="nx">div</span> <span class="nx">id</span><span class="o">=</span><span class="s1">&#39;div_id&#39;</span><span class="o">&gt;</span>

<span class="o">&lt;</span><span class="err">/div&gt;</span>
<span class="o">&lt;</span><span class="nx">button</span>  <span class="nx">onclick</span><span class="o">=</span><span class="s2">&quot;routeBringer(&#39;&#39;,&#39;div_id&#39;)&quot;</span><span class="o">&gt;</span><span class="nx">Add</span> <span class="nx">Contact</span>   <span class="o">&lt;</span><span class="err">/button&gt;</span></code></pre></div>

<blockquote>
<p>next we gonna ajaxify the form new Contact.</p>
</blockquote>

<h3>ajaxify your form</h3>

<blockquote>
<p>the result that we get is our new form displayed then we add our script that prevent the default submit then you call the PostForm function which will handle the vars of form and make the submit with ajax</p>
</blockquote>

<div class="highlight"><pre><code class="language-php" data-lang="php"><span class="p">{{</span> <span class="nx">form</span><span class="p">(</span><span class="nx">form</span><span class="p">)</span> <span class="p">}}</span> <span class="c1">//display our form new Contact</span>

<span class="o">&lt;</span><span class="nx">script</span><span class="o">&gt;</span>

<span class="err">$</span><span class="p">(</span><span class="nx">document</span><span class="p">)</span><span class="o">.</span><span class="nx">ready</span><span class="p">(</span><span class="k">function</span><span class="p">(){</span>
        <span class="k">var</span> <span class="nx">forms</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;[ name=&quot;{{ form.vars.full_name }}&quot;]&#39;</span><span class="p">];</span>

        <span class="err">$</span><span class="p">(</span> <span class="nx">forms</span><span class="o">.</span><span class="nb">join</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span> <span class="p">)</span><span class="o">.</span><span class="nx">submit</span><span class="p">(</span> <span class="k">function</span><span class="p">(</span> <span class="nx">e</span> <span class="p">){</span>

        <span class="nx">e</span><span class="o">.</span><span class="nx">preventDefault</span><span class="p">();</span>                         <span class="c1">//prevent the default submit of our form</span>
        <span class="nx">postForm</span><span class="p">(</span> <span class="err">$</span><span class="p">(</span><span class="k">this</span><span class="p">),</span> <span class="k">function</span><span class="p">(</span> <span class="nx">response</span> <span class="p">){</span>    <span class="c1">//call our Function PostForm and pass as first variable the form attribute name</span>
        <span class="err">$</span><span class="p">(</span><span class="s2">&quot;#div_id&quot;</span><span class="p">)</span><span class="o">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">response</span><span class="p">)});</span>          <span class="c1">//put the response in the div result</span>


             <span class="k">return</span> <span class="k">false</span><span class="p">;</span>
        <span class="p">});</span>
    <span class="p">});</span>

<span class="o">&lt;/</span><span class="nx">script</span><span class="o">&gt;</span></code></pre></div>

<blockquote>
<p>this is the postForm Function</p>
</blockquote>

<div class="highlight"><pre><code class="language-js" data-lang="js"><span class="kd">function</span> <span class="nx">postForm</span><span class="p">(</span> <span class="nx">$form</span><span class="p">,</span> <span class="nx">callback</span> <span class="p">){</span>


 <span class="cm">/*</span>
<span class="cm">  * Get all form values</span>
<span class="cm">  */</span>

 <span class="kd">var</span> <span class="nx">values</span> <span class="o">=</span> <span class="p">{};</span>
 <span class="nx">$</span><span class="p">.</span><span class="nx">each</span><span class="p">(</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">serializeArray</span><span class="p">(),</span> <span class="kd">function</span><span class="p">(</span><span class="nx">i</span><span class="p">,</span> <span class="nx">field</span><span class="p">)</span> <span class="p">{</span>
     <span class="nx">values</span><span class="p">[</span><span class="nx">field</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">field</span><span class="p">.</span><span class="nx">value</span><span class="p">;</span>
 <span class="p">});</span>
 <span class="cm">/*</span>
<span class="cm">  * Throw the form values to the server!</span>
<span class="cm">  */</span>

 <span class="nx">$</span><span class="p">.</span><span class="nx">ajax</span><span class="p">({</span>
     <span class="nx">type</span>        <span class="o">:</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="s1">&#39;method&#39;</span> <span class="p">),</span>
     <span class="nx">url</span>         <span class="o">:</span> <span class="nx">$form</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span> <span class="s1">&#39;action&#39;</span> <span class="p">),</span>
     <span class="nx">data</span>        <span class="o">:</span> <span class="nx">values</span><span class="p">,</span>
     <span class="nx">success</span>     <span class="o">:</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
         <span class="nx">callback</span><span class="p">(</span> <span class="nx">data</span> <span class="p">);</span>


     <span class="p">}</span>
 <span class="p">});</span>
<span class="p">}</span></code></pre></div>

<blockquote>
<p>after reading the function postForm we notice that there is two section the first one we put every values of our form (first attribute) in values vary after turning with.serializeArray () our form passed in the first parameter to a Javascript Array of object so that it will be ready to be encoded as a JSON string the second part is $. Ajax, jQuery function that will send our form submit as Ajax request in the success of our Ajax request the function callback will be called with data as a parameter this function will put the response html to our div result</p>
</blockquote>

<h6>I hope that I helped you for understanding some Ajax work with Symfony sorry for my English !</h6>



  <section class="post-comments">
    <h2>Comments</h2>
    <div id="disqus_thread"></div>

  </section>

  <script type="text/javascript">
      /* * * CONFIGURATION VARIABLES * * */
      var disqus_shortname = 'httpachreftliligithubio';

      /* * * DON'T EDIT BELOW THIS LINE * * */
      (function() {
          var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
          dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
          (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>

  <h1>Tag Cloud</h1>
  
  
   <span class="site-tag">
      <a href="/tag/Symfony/"
          style="font-size: 88%">
              Symfony (2)
      </a>
  </span>
  
   <span class="site-tag">
      <a href="/tag/Symfony-Files/"
          style="font-size: 84%">
              Symfony Files (1)
      </a>
  </span>
  
</div>


<div class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h5>
          <a href="/2015/08/24/Download-upload-files-in-data-base-with-symfony-form/">
            Download & upload files in data base with symfony!
            <small>24 Aug 2015</small>
          </a>
        </h5>
      </li>
    
      <li>
        <h5>
          <a href="/2015/08/23/Ajaxify-Knp-Bundle-pagination/">
            Ajaxify the Pagination of knp Paginator Bundle?
            <small>23 Aug 2015</small>
          </a>
        </h5>
      </li>
    
  </ul>
</div>

      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
